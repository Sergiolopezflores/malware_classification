import numpy as np
import os

# Directorio que contiene los archivos .npy con el formato antiguo
directorio_antiguo = '/ahma-hub/traces_selected_bandwidth/traces_40bd'

# Directorio donde guardar los archivos actualizados
directorio_nuevo = '/ahma-hub/traces_selected_bandwidth2/traces_40bd'

# Obtener la lista de archivos en el directorio antiguo
archivos_antiguos = os.listdir(directorio_antiguo)

# Iterar sobre cada archivo
for archivo in archivos_antiguos:
    # Comprobar si el archivo tiene extensión .npy
    if archivo.endswith('.npy'):
        # Ruta completa al archivo original y al nuevo archivo actualizado
        ruta_original = os.path.join(directorio_antiguo, archivo)
        ruta_nueva = os.path.join(directorio_nuevo, archivo)
        
        # Cargar los datos del archivo original con NumPy 1.18.5
        datos = np.load(ruta_original, allow_pickle=True, encoding='latin1')
        
        # Guardar los datos en el nuevo formato compatible con NumPy 1.26.4
        np.save(ruta_nueva, datos, allow_pickle=True, fix_imports=False)

print("¡La conversión de archivos ha sido completada!")
